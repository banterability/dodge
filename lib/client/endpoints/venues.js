// Generated by CoffeeScript 1.7.1
(function() {
  var getVenueId, hasRequiredParamsForVenueSearch;

  hasRequiredParamsForVenueSearch = function(options) {
    if (options.intent === 'browse') {
      return ((options.ll != null) && (options.radius != null)) || ((options.ne != null) && (options.sw != null)) || ((options.near != null) && (options.radius != null));
    } else {
      return (options.ll != null) || (options.near != null);
    }
  };

  getVenueId = function(options) {
    if (!options.venueId) {
      throw new Error("Missing required venueId");
    }
    return options.venueId;
  };

  module.exports = function(client) {
    return {
      venues: {
        categories: function(callback) {
          return client.fetch('venues/categories', {}, function(err, data) {
            var _ref;
            return callback(err, data != null ? (_ref = data.response) != null ? _ref.categories : void 0 : void 0);
          });
        },
        detail: function(options, callback) {
          var venueId;
          if (options == null) {
            options = {};
          }
          venueId = getVenueId(options);
          return client.fetch("venues/" + venueId, {}, function(err, data) {
            var _ref;
            return callback(err, data != null ? (_ref = data.response) != null ? _ref.venue : void 0 : void 0);
          });
        },
        nextvenues: function(options, callback) {
          var venueId;
          if (options == null) {
            options = {};
          }
          venueId = getVenueId(options);
          return client.fetch("venues/" + venueId + "/nextvenues", {}, function(err, data) {
            var _ref;
            return callback(err, data != null ? (_ref = data.response) != null ? _ref.nextVenues : void 0 : void 0);
          });
        },
        search: function(options, callback) {
          if (options == null) {
            options = {};
          }
          if (!hasRequiredParamsForVenueSearch(options)) {
            throw new Error("Missing location parameter(s)");
          }
          return client.fetch('venues/search', options, function(err, data) {
            var _ref;
            return callback(err, data != null ? (_ref = data.response) != null ? _ref.venues : void 0 : void 0);
          });
        }
      }
    };
  };

}).call(this);
